#!/usr/bin/env bash
set -e

BUILD_DIR=$1
CACHE_DIR=$2

echo "-----> Installing Graphviz"

# Pick a version
GRAPHVIZ_VERSION=2.50.0

# Download and extract
curl -L "https://gitlab.com/graphviz/graphviz/-/archive/${GRAPHVIZ_VERSION}/graphviz-${GRAPHVIZ_VERSION}.tar.gz" | tar xz

cd graphviz-${GRAPHVIZ_VERSION}

# Install into $BUILD_DIR/vendor
./configure --prefix=$BUILD_DIR/vendor/graphviz
make
make install

echo "-----> Graphviz installed"